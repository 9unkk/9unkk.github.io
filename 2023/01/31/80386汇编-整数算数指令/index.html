<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="咸鱼">
    <meta name="author" content="9unk">
    
    <title>
        
            80386汇编-整数算数指令 |
        
        9unk Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.jpg">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":false,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/logo.jpg","favicon":"/images/logo.jpg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"人初做事，如鸡伏卵，不舍而生气渐充。如燕营巢，不息而结构渐牢。如滋培之木，不见其长，有时而大。如有本之泉，不舍昼夜，盈科而后进，放乎四海。"},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                9unk Blog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">80386汇编-整数算数指令</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/logo.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">9unk</span>
                        
                            <span class="author-label">Lv5</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2023-01-31 23:25:00</span>
        <span class="mobile">2023-01-31 23:25</span>
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E6%B1%87%E7%BC%96/">汇编</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>每种汇编语言都有进行操作数移位的指令，移位和循环移位指令在控制硬件设备、加密数据以及实现高速的图形操作时特别有用。本章讲述如何进行移位和循环移位操作以及使用移位操作进行高效的乘法和除法运算。</p>
<ul>
<li>移位和循环移位指令</li>
<li>移位和循环移位的应用</li>
<li>乘法和除法指令</li>
<li>扩展加法和减法</li>
<li>ASCII和未压缩十进制算术指令</li>
<li>压缩十进制算术指令</li>
</ul>
<h1 id="移位和循环移位指令"><a href="#移位和循环移位指令" class="headerlink" title="移位和循环移位指令"></a>移位和循环移位指令</h1><p>Intel 提供了多种移位指令，下表中所有的移位指令都影响溢出标志和进位标志。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/215806118-b105d073-1fa4-4c15-baa7-74a4f87e1ce7.png"
                      alt="1"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/215806316-29302ebd-72b1-4fe4-902b-f57af1346936.png"
                      alt="2"
                ></p>
<h2 id="逻辑移位和算数移位"><a href="#逻辑移位和算数移位" class="headerlink" title="逻辑移位和算数移位"></a>逻辑移位和算数移位</h2><p>对于一个数字来说有两种最基本的移位操作。</p>
<ul>
<li><p>第一种为逻辑移位，即以 0 填充最后移出的位。在下图中，一个字节逻辑右移一位，第 7 位被赋值0。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/215810735-a560fa93-126d-4661-8d70-31a6f96714ce.png"
                      alt="3"
                ></p>
</li>
<li><p>另一种移位类型称为算术移位，最后移出的位用数字原来的符号位填充。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/215811637-a060a57b-f350-45c7-bac4-ddfbcda3f024.png"
                      alt="4"
                ></p>
</li>
</ul>
<h2 id="SHL-指令"><a href="#SHL-指令" class="headerlink" title="SHL 指令"></a>SHL 指令</h2><p>SHL指令对目的操作数执行逻辑左移操作，最低位以0填充，移出的最高位送入进位标志 CF，原来进位标志位中的值将丢失。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/215923732-9054af16-8ccf-49f7-9ee4-8b2146eba1ac.png"
                      alt="5"
                ></p>
<p>SHL 语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHL 目的操作数，移位位数</span><br></pre></td></tr></table></figure>

<p>SHL 指令允许使用的操作数类型：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SHL reg,imm8</span><br><span class="line">SHL mem,imm8</span><br><span class="line">SHL reg,CL</span><br><span class="line">SHL mem,CL</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Intel 8086&#x2F;8088 处理器要求 imm8 必须等于1，从 80286 及以上的处理器开始，imm8 可以是0~255之间的整数。在任何Intel处理器上，都可以使用CL存放移位位数。<br>上面的格式同样适用于 SHA，SAL，SAR，ROR，ROL，RCR 和 RCL 指令。</p>
</blockquote>
<h2 id="SHR-指令"><a href="#SHR-指令" class="headerlink" title="SHR 指令"></a>SHR 指令</h2><p>SHR指令对目的操作数执行逻辑右移操作，移出的数据位以0代替，最低位被复制到进位标志中，原来的进位标志值丢失。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/216011621-40407c66-d239-4b10-abef-d8446df2b697.png"
                      alt="6"
                ></p>
<h2 id="SAL-和-SAR-指令"><a href="#SAL-和-SAR-指令" class="headerlink" title="SAL 和 SAR 指令"></a>SAL 和 SAR 指令</h2><p>SAL指令与SHL指令等价。SAR指令对目的的操作数执行算术右移操作。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/216082269-89f26e7a-e458-4d91-acaf-67084e8ee429.png"
                      alt="7"
                ></p>
<h2 id="ROL-指令"><a href="#ROL-指令" class="headerlink" title="ROL 指令"></a>ROL 指令</h2><p>ROL指令在向左移动一位后，把最高位同时复制到进位标志和最低位中。其指令格式与SHL指令相同。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/216089673-6dbc660c-5291-4c47-8067-b065e2040c92.png"
                      alt="8"
                ></p>
<h2 id="RCL-和-RCR-指令"><a href="#RCL-和-RCR-指令" class="headerlink" title="RCL 和 RCR 指令"></a>RCL 和 RCR 指令</h2><p>RCL指令在每位左移一位后，把进位标志复制到最低有效位中，把最高有效位复制到进位标志中。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/216210875-aa38209a-f75c-4b87-822d-a19e11a4b1e4.png"
                      alt="9"
                ></p>
<p>RCR 指令：RCR指令再每位向右移动一位后，把进位标志复制到最高有效位中并把最低有效位复制到进位标志中。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/218295483-cff01cc0-15e8-4abc-abd8-7ab517e54e67.png"
                      alt="10"
                ></p>
<h2 id="SHLD-x2F-SHRD指令"><a href="#SHLD-x2F-SHRD指令" class="headerlink" title="SHLD&#x2F;SHRD指令"></a>SHLD&#x2F;SHRD指令</h2><p>SHLD 和 SHRD 指令是从 Intel 386 处理器开始引入的。</p>
<p>SHLD 指令把目的操作数左移指定的位数，左移空出来的位用源操作数的高位来填充。指令对源操作数没有任何影响，但是符号标志、零标志、辅助进位标志、奇偶标志和进位标志都受影响。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHLD 指令把目的操作数，源操作数，移位位数</span><br></pre></td></tr></table></figure>

<p>SHRD 指令把目的操作数向右移动到指定的位数，空出来的位由源操作数的低位来填充。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHRD 目的操作数，源操作数，移位位数</span><br></pre></td></tr></table></figure>

<blockquote>
<p>源操作数必须是寄存器。</p>
</blockquote>
<h1 id="移位和循环移位的应用"><a href="#移位和循环移位的应用" class="headerlink" title="移位和循环移位的应用"></a>移位和循环移位的应用</h1><h2 id="多双字移位"><a href="#多双字移位" class="headerlink" title="多双字移位"></a>多双字移位</h2><p>要对扩展精度整数（长整数）进行移位操作，可把它划分为字节数组、字数组或双字数组，然后再对该数组进行移位操作。在内存中存储数字时通常采取的方式是最低字节在最低的地址位上。下面的步骤以一个双数组为例，说明了如何把这样的数组右移一位：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：Array_Shift.asm</span><br><span class="line">;功能：演示如何对一个数组进行移位</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-13</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line">.data</span><br><span class="line">ArraySize = 3</span><br><span class="line">array DWORD ArraySize DUP(99999999h)</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">start:</span><br><span class="line">    mov esi,0</span><br><span class="line">    shr array[esi + 8],1</span><br><span class="line">    rcr array[esi + 4],1</span><br><span class="line">    rcr array[esi],1</span><br><span class="line">    exit</span><br><span class="line">END start</span><br></pre></td></tr></table></figure>

<ol>
<li>把 ESI 的值设置为 array 的偏移</li>
<li>把最高位[esi+8]处的双字右移一位，此时最低位复制到进位标志（CF）中，最高位补0。</li>
<li>把[esi+4]的值右移一位，最高位自动以进位标志（CF）的值填充，最低位复制到进位标志中。</li>
<li>把[esi+0]处的双字右移一位，其最高位自动以进位标志填充，其最低位复制到进位标志中。</li>
</ol>
<h2 id="二进制乘法"><a href="#二进制乘法" class="headerlink" title="二进制乘法"></a>二进制乘法</h2><p>IA-32 的二进制乘法指令（MUL和IMUL）相对于其他机器指令来说是比较缓慢的。汇编程序员通常在遇到乘数是2的次幂的情况下，用SHL指令进行无符号数的乘法，以此提高运算效率。<br>例如：计算 123 x 36 &#x3D; 123 x (2^5+2^2)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：mul_div.asm</span><br><span class="line">;功能：演示使用逻辑方法运算乘法和除法</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-14</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">start:</span><br><span class="line">    ;乘法运算：123*36</span><br><span class="line">    mov eax,123</span><br><span class="line">    mov ebx,eax</span><br><span class="line">    shl eax,5</span><br><span class="line">    shl ebx,2</span><br><span class="line">    add eax,ebx</span><br><span class="line">    CALL DumpRegs</span><br><span class="line">    ;除法运算：1024/8</span><br><span class="line">    mov eax,1024</span><br><span class="line">    shr eax,3</span><br><span class="line">    CALL DumpRegs</span><br><span class="line">    CALL WaitMsg</span><br><span class="line">    exit</span><br><span class="line">END start</span><br></pre></td></tr></table></figure>
<blockquote>
<p>逻辑指令也可以用于除法。</p>
</blockquote>
<h2 id="显示二进制数的数据位"><a href="#显示二进制数的数据位" class="headerlink" title="显示二进制数的数据位"></a>显示二进制数的数据位</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：BinToAsc.asm</span><br><span class="line">;功能：使用 SHL 指令实现，将整数以bit数据的形式显示在屏幕上</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-14</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line">.data</span><br><span class="line">ASCII DWORD 0ABh</span><br><span class="line">BUFFER BYTE 32 dup(0),0</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">    mov eax,ASCII</span><br><span class="line">    lea esi,BUFFER</span><br><span class="line">    call BinToAsc</span><br><span class="line">    mov edx,offset BUFFER</span><br><span class="line">    call WriteString</span><br><span class="line">    call crlf</span><br><span class="line">    exit</span><br><span class="line">main ENDP</span><br><span class="line"></span><br><span class="line">;---------------------------</span><br><span class="line">BinToAsc PROC</span><br><span class="line">;功能：把32位的整数转换为bit，并显示在屏幕上。</span><br><span class="line">;入口参数：EAX=二进制数，ESI=缓冲区指针。</span><br><span class="line">;返回值：buffer 填充二进制ASCII码值。</span><br><span class="line">;--------------------------</span><br><span class="line">    push ecx</span><br><span class="line">    push esi</span><br><span class="line">    mov ecx,32</span><br><span class="line">L1:</span><br><span class="line">    shl eax,1</span><br><span class="line">    mov BYTE PTR [esi],&#x27;0&#x27;</span><br><span class="line">    jnc L2</span><br><span class="line">    mov BYTE PTR [esi],&#x27;1&#x27;</span><br><span class="line">L2:</span><br><span class="line">    inc esi</span><br><span class="line">    loop L1</span><br><span class="line">    pop esi</span><br><span class="line">    pop ecx</span><br><span class="line">    ret</span><br><span class="line">BinToAsc ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>
<h2 id="分离-MS-DOS-文件的各个日期域"><a href="#分离-MS-DOS-文件的各个日期域" class="headerlink" title="分离 MS-DOS 文件的各个日期域"></a>分离 MS-DOS 文件的各个日期域</h2><p>在 DOS 模式下，MS-DOS的功能 57h 在DX 中返回文件的日期戳，其中位 0~4 代表 0~31 之间的天数，位 5~8 代表月份，位 9~15 存放的年份。假设文件最后的修改时间是 1999 年 3 月 10 日，那么DX的时间戳如下：<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/219051658-a82b8746-6ee3-4ae2-ba0b-03c222cce03f.png"
                      alt="11"
                ></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：Time.asm</span><br><span class="line">;功能：演示如何用移位分离各个时期域</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-15</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line">.data</span><br><span class="line">time dw  0010011001101010B</span><br><span class="line">day db 0</span><br><span class="line">month db 0</span><br><span class="line">year dw 0</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">    mov dx,time</span><br><span class="line">    mov al,dl</span><br><span class="line">    and al,00011111b    ;清除位5~7</span><br><span class="line">    mov day,al          ;保存在变量 day 中</span><br><span class="line">    ;</span><br><span class="line">    mov ax,dx</span><br><span class="line">    shr ax,5            ;右移5位</span><br><span class="line">    and al,00001111b    ;清除位 4~7</span><br><span class="line">    mov month,al</span><br><span class="line">    ;</span><br><span class="line">    mov al,dh</span><br><span class="line">    shr al,1            ;右移一位</span><br><span class="line">    mov ah,0            ;AH清零</span><br><span class="line">    add ax,1980         ;年份是相对于 1980 年的</span><br><span class="line">    mov year,ax         ;保存的变量 year 中</span><br><span class="line">    exit</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>

<h1 id="乘法和除法指令"><a href="#乘法和除法指令" class="headerlink" title="乘法和除法指令"></a>乘法和除法指令</h1><h2 id="MUL-指令"><a href="#MUL-指令" class="headerlink" title="MUL 指令"></a>MUL 指令</h2><p>MUL（无符号乘法）指令有三种格式：第一种将 8 位的操作数与 AL 相乘；第二种将 16 位 操作数与 AX 相乘；第三种将32位操作数与 EAX 相乘。乘数和被乘数大小必须相同，乘积的尺寸是乘数&#x2F;被乘数大小的两倍。三种格式都既接受寄存器操作数，也接受内存操作数，但是不接受立即操作数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MUL r/m8</span><br><span class="line">MUL r/m16</span><br><span class="line">MUL r/m32</span><br></pre></td></tr></table></figure>
<p>指令中唯一的一个操作数是乘数。由于目的操作数（乘积）是乘数&#x2F;被乘数大小的两倍，因此不会发生溢出。如果乘积的高半部分不为0，就置进位和溢出标志位。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/219082342-dbaf8e1a-c4bc-470a-a1b3-cea6ac8e76a9.png"
                      alt="12"
                ></p>
<h2 id="IMUL-指令"><a href="#IMUL-指令" class="headerlink" title="IMUL 指令"></a>IMUL 指令</h2><p>IMUL（有符号乘法）指令在执行有符号整数的乘法运算，保留了乘积的符号位。IMUL指令在 IA-32 指令集中有三种格式：单操作数、双操作数和三操作数。</p>
<h3 id="单操作数"><a href="#单操作数" class="headerlink" title="单操作数"></a>单操作数</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/220107498-9fe9772d-f5a9-410c-9226-78f68c8911bf.png"
                      alt="13"
                ></p>
<blockquote>
<p>和 MUL 指令一样，一般情况下不会发生溢出。如果进位和标志位置位了，表明高半部分 DX 或 EDX 存在值。</p>
</blockquote>
<h3 id="双操作数"><a href="#双操作数" class="headerlink" title="双操作数"></a>双操作数</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/220108868-95a2526e-424c-4254-b239-44d0d0955040.png"
                      alt="14"
                ></p>
<h3 id="三操作数"><a href="#三操作数" class="headerlink" title="三操作数"></a>三操作数</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/220109071-5237fd7e-6ed8-4dbc-9e5d-2a6806dff194.png"
                      alt="15"
                ></p>
<h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：imul.asm</span><br><span class="line">;功能：演示乘法指令（有符号数）IMUL</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-20</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line">.data</span><br><span class="line">word1 SWORD 4</span><br><span class="line">dword1 SDWORD 4</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">    ;单操作数 16 位</span><br><span class="line">    mov al,48</span><br><span class="line">    mov bl,4</span><br><span class="line">    imul bl</span><br><span class="line">    ;单操作数 32 位</span><br><span class="line">    mov eax,+4823424</span><br><span class="line">    mov ebx,-423</span><br><span class="line">    imul ebx</span><br><span class="line">    ;双操作数</span><br><span class="line">    mov ax,-16</span><br><span class="line">    mov bx,2</span><br><span class="line">    imul bx,ax</span><br><span class="line">    imul bx,2</span><br><span class="line">    imul bx,word1</span><br><span class="line">    mov eax,-16</span><br><span class="line">    mov ebx,2</span><br><span class="line">    imul ebx,eax</span><br><span class="line">    imul ebx,2</span><br><span class="line">    imul ebx,dword1</span><br><span class="line">    ;三操作数</span><br><span class="line">    imul bx,word1,-16</span><br><span class="line">    imul ebx,dword1,-16</span><br><span class="line">    imul ebx,dword1,-2000000000</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>

<h2 id="乘法操作的基准（性能）测试"><a href="#乘法操作的基准（性能）测试" class="headerlink" title="乘法操作的基准（性能）测试"></a>乘法操作的基准（性能）测试</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：ComepareMult.asm</span><br><span class="line">;功能：演示位移指令、MUL、和IMUL指令时间</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-20</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line">.data</span><br><span class="line">LOOP_COUNT = 0FFFFFFFFh</span><br><span class="line">intval DWORD 5</span><br><span class="line">startTime DWORD ?</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">    call GetMseconds    ;获取起始时间</span><br><span class="line">    mov startTime,eax</span><br><span class="line"></span><br><span class="line">    mov eax,intval</span><br><span class="line">    ;call mult_by_shifting</span><br><span class="line">    call mult_by_mul</span><br><span class="line"></span><br><span class="line">    call GetMseconds    ;获取停止时间</span><br><span class="line">    sub eax,startTime</span><br><span class="line">    call WriteDec       ;显示用掉的时间</span><br><span class="line">    exit</span><br><span class="line">main ENDP</span><br><span class="line"></span><br><span class="line">mult_by_shifting PROC</span><br><span class="line">;EAX 乘以  36，使用 SHL 指令</span><br><span class="line">    mov ecx,LOOP_COUNT</span><br><span class="line">L1:</span><br><span class="line">    push eax</span><br><span class="line">    mov ebx,eax     ;保存原始eax</span><br><span class="line">    shl eax,5</span><br><span class="line">    shl ebx,2</span><br><span class="line">    add eax,ebx</span><br><span class="line">    pop eax         ;恢复 eax</span><br><span class="line">    loop L1</span><br><span class="line">    ret</span><br><span class="line">mult_by_shifting ENDP</span><br><span class="line"></span><br><span class="line">mult_by_mul PROC</span><br><span class="line">;EAX 乘以  36，使用 MUL 指令</span><br><span class="line">    mov ecx,LOOP_COUNT</span><br><span class="line">L1:</span><br><span class="line">    push eax</span><br><span class="line">    mov ebx,36</span><br><span class="line">    mul ebx</span><br><span class="line">    pop eax</span><br><span class="line">    loop L1</span><br><span class="line">    ret</span><br><span class="line">mult_by_mul ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>
<h2 id="DIV-指令"><a href="#DIV-指令" class="headerlink" title="DIV 指令"></a>DIV 指令</h2><p>DIV（无符号除法）指令执行 8 位、16位和32位无符号数整数除法运算。指令格式如下：<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/220147424-756b4918-aa02-4af6-af7f-0977f106b74d.png"
                      alt="16"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/220147739-109e71b7-f290-487a-9eed-d9b5330bedc6.png"
                      alt="17"
                ></p>
<h2 id="有符号整数除法"><a href="#有符号整数除法" class="headerlink" title="有符号整数除法"></a>有符号整数除法</h2><p>有符号除法和无符号除法几乎是完全相同的，唯一的不同在于：在进行除法操作之前，需要进行符号扩展。</p>
<h3 id="符号扩展指令（CBW、CWD、CDQ）"><a href="#符号扩展指令（CBW、CWD、CDQ）" class="headerlink" title="符号扩展指令（CBW、CWD、CDQ）"></a>符号扩展指令（CBW、CWD、CDQ）</h3><ul>
<li>CBW：扩展AL的符号位至AH中（字节符号扩展至字）</li>
<li>CWD：指令扩展AX的符号位至DX中（字符号扩展至双字）</li>
<li>CDQ：指令扩展EAX的符号位至EDX中</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：idiv.asm</span><br><span class="line">;功能：演示idiv指令的使用</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-20</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line">.data</span><br><span class="line">byteVal SBYTE -48</span><br><span class="line">wordVal SWORD -5000</span><br><span class="line">dwordVal SDWORD -48</span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">    ;例1：-48/5</span><br><span class="line">    mov al,byteVal</span><br><span class="line">    cbw</span><br><span class="line">    mov bl,5</span><br><span class="line">    idiv bl</span><br><span class="line">    ;例2：-5000/256</span><br><span class="line">    mov ax,wordVal</span><br><span class="line">    cwd</span><br><span class="line">    mov bx,+256</span><br><span class="line">    idiv bx</span><br><span class="line">    ;例3：5000/-256</span><br><span class="line">    mov eax,dwordVal</span><br><span class="line">    cdq</span><br><span class="line">    mov ebx,-256</span><br><span class="line">    idiv ebx</span><br><span class="line">    exit</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>
<h3 id="除法溢出"><a href="#除法溢出" class="headerlink" title="除法溢出"></a>除法溢出</h3><p>在除法操作生产的商太大，目的操作数无法容纳的时候，就会导致除法溢出，这会导致 CPU 触发一个中断，当前程序被终止。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：div_over.asm</span><br><span class="line">;功能：演示除法溢出</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-20</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">    mov ax,1000h</span><br><span class="line">    mov bl,10h</span><br><span class="line">    div bl</span><br><span class="line">    ;</span><br><span class="line">    mov eax,1000h</span><br><span class="line">    cdq</span><br><span class="line">    mov ebx,10h</span><br><span class="line">    div ebx</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/220164970-f378d226-9167-445e-a3ee-f400938a52be.png"
                      alt="18"
                ></p>
<h2 id="算术表达式的实现"><a href="#算术表达式的实现" class="headerlink" title="算术表达式的实现"></a>算术表达式的实现</h2><h3 id="例1"><a href="#例1" class="headerlink" title="例1"></a>例1</h3><p>用汇编实现如下语句（32位无符号整数）：<br>var4 &#x3D; (var1 + var2) * var3;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mov eax,var1</span><br><span class="line">add eax,var2</span><br><span class="line">mul var3</span><br><span class="line">jc tooBig</span><br><span class="line">mov var4,eax</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里要注意，var4 是32位的。如果计算过程中出现溢出，最后var4存储的结果必然是错的。</p>
</blockquote>
<h3 id="例2"><a href="#例2" class="headerlink" title="例2"></a>例2</h3><p>用汇编实现如下语句（32位无符号整数）：<br>var4 &#x3D; (var1 * 5) &#x2F; (var2 - 3);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mov eax,var1</span><br><span class="line">mov ebx,5</span><br><span class="line">mul ebx</span><br><span class="line">sub var2,3</span><br><span class="line">div var2</span><br><span class="line">mov var4,eax</span><br></pre></td></tr></table></figure>

<blockquote>
<p>mul 存放结果在 EDX:EAX 中，而 div 的被除数也是 EDX:EAX，因此不需要检查溢出。</p>
</blockquote>
<h3 id="例3"><a href="#例3" class="headerlink" title="例3"></a>例3</h3><p>用汇编实现如下语句（32位有符号整数）：<br>var4 &#x3D; (var1 * -5) &#x2F; (-var2 % var3);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">;(-var2 % var3)</span><br><span class="line">mov eax,var2</span><br><span class="line">neg eax</span><br><span class="line">cdq</span><br><span class="line">idiv var3</span><br><span class="line">mov ebx,edx ;备份</span><br><span class="line">;(var1 * -5)</span><br><span class="line">mov eax,-5</span><br><span class="line">imul var1</span><br><span class="line">;</span><br><span class="line">idiv ebx</span><br><span class="line">mov var4,eax</span><br></pre></td></tr></table></figure>
<blockquote>
<p>neg 取反，将整数变成负数。</p>
</blockquote>
<h1 id="扩展加法和减法"><a href="#扩展加法和减法" class="headerlink" title="扩展加法和减法"></a>扩展加法和减法</h1><h2 id="ADC-指令"><a href="#ADC-指令" class="headerlink" title="ADC 指令"></a>ADC 指令</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/220280066-52ef0cd5-6b09-4787-a6c3-0200bb477012.png"
                      alt="19"
                ></p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>实现两个任意同样尺寸的整数相加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：ExtAdd.asm</span><br><span class="line">;功能：设计子函数 Extended_Add 实现任意两个同样大小的整数相加</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-21</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line">.data</span><br><span class="line">num1 DWORD 123456789</span><br><span class="line">lengthnum = ($-num1)/TYPE num1</span><br><span class="line">num2 DWORD 123456789</span><br><span class="line">result DWORD lengthnum+1 dup(0)</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">mov esi,OFFSET num1</span><br><span class="line">mov edi,OFFSET num2</span><br><span class="line">mov ebx,OFFSET result</span><br><span class="line">mov ecx,lengthnum</span><br><span class="line">call Extended_Add</span><br><span class="line">;显示结果</span><br><span class="line">mov eax,result+4</span><br><span class="line">call WriteHex</span><br><span class="line">mov eax,result</span><br><span class="line">call WriteHex</span><br><span class="line">call crlf</span><br><span class="line">exit</span><br><span class="line">main ENDP</span><br><span class="line">;--------------------------------------------------------</span><br><span class="line">Extended_Add PROC</span><br><span class="line">;功能：实现任意两个同样大小的整数相加</span><br><span class="line">;入口参数：ESI和EDI表示两个整数的指针；EBX表示计算结果的指针；ECX表示整数的大小</span><br><span class="line">;出口参数：无</span><br><span class="line">;--------------------------------------------------------</span><br><span class="line">    pushad</span><br><span class="line">    clc</span><br><span class="line">L1:</span><br><span class="line">    mov eax,[esi]</span><br><span class="line">    adc eax,[edi]</span><br><span class="line">    pushfd</span><br><span class="line">    mov [ebx],eax</span><br><span class="line">    add esi,4</span><br><span class="line">    add edi,4</span><br><span class="line">    add ebx,4</span><br><span class="line">    popfd</span><br><span class="line">    loop L1</span><br><span class="line"></span><br><span class="line">    mov dword ptr [ebx],0</span><br><span class="line">    adc dword ptr [ebx],0</span><br><span class="line">    popad</span><br><span class="line">    ret</span><br><span class="line">Extended_Add ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>

<h2 id="SBB-指令"><a href="#SBB-指令" class="headerlink" title="SBB 指令"></a>SBB 指令</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/220303238-5225b859-9e92-41ed-8542-72a8f42f0bdf.png"
                      alt="20"
                ></p>
<h1 id="ASCII和未压缩十进制算术指令"><a href="#ASCII和未压缩十进制算术指令" class="headerlink" title="ASCII和未压缩十进制算术指令"></a>ASCII和未压缩十进制算术指令</h1><p>未压缩十进制算术指令主要功能：将ASCII值转换为未压缩的值，之后再对该值进行调整。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/221178817-87448611-a458-44bc-a64a-1b9058648082.png"
                      alt="21"
                ></p>
<p>指令集中有4条指令可以处理这一类的 ASCII 加法、减法、乘法和除法。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/221230763-44d9479c-8452-424f-9ca5-8d0f879ca874.png"
                      alt="22"
                ></p>
<p>ASCII 算术指令比二进制算术指令执行得慢，但它有如下有点：</p>
<ul>
<li>在进行算术运算之前无须进行字符串到二进制数值得转换</li>
<li>可以使用假想得小数点进行实数运算，可避免使用浮点数时因近似产生的错误</li>
</ul>
<h2 id="AAA指令"><a href="#AAA指令" class="headerlink" title="AAA指令"></a>AAA指令</h2><p>AAA调整指令，将两个未压缩的十进制数字相加的和，转换成两个未压缩的十进制数字，最终可通过与 30h 进行 “或” 运算把它转换成对应的 ASCII 码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">    mov ah,0</span><br><span class="line">    mov al,&#x27;8&#x27;</span><br><span class="line">    add al,&#x27;2&#x27;</span><br><span class="line">    aaa</span><br><span class="line">    or ax,3030h</span><br><span class="line">    INVOKE ExitProcess,0</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>

<h3 id="使用-AAA-指令的多字节加法"><a href="#使用-AAA-指令的多字节加法" class="headerlink" title="使用 AAA 指令的多字节加法"></a>使用 AAA 指令的多字节加法</h3><p>程序功能：将两个小数进行相加并输出结果（两个小数相加，我们可以把小数点忽略，在计算机中用整数相加，获得结果）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：ASCII_add.asm</span><br><span class="line">;功能：对两个小数（ASCII码）进行加法运算，并输出结果。</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-25</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line"></span><br><span class="line">DECIMAL_OFFSET = 5</span><br><span class="line">.data</span><br><span class="line">;两个小数相加，我们可以把小数点忽略，在计算机中用整数相加。</span><br><span class="line">decimal_one BYTE &quot;100123456789765&quot;  ;1001234567.89765</span><br><span class="line">decimal_two BYTE &quot;900402076502015&quot;  ;9004020765.02015</span><br><span class="line">sum BYTE (SIZEOF decimal_one+1) DUP(0),0</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line"></span><br><span class="line">    mov esi,SIZEOF decimal_one-1</span><br><span class="line">    mov edi,SIZEOF decimal_one</span><br><span class="line">    mov ecx,SIZEOF decimal_one</span><br><span class="line">    mov bh,0</span><br><span class="line"></span><br><span class="line">L1: mov ah,0</span><br><span class="line">    mov al,decimal_one[esi]</span><br><span class="line">    add al,bh</span><br><span class="line">    aaa</span><br><span class="line">    mov bh,ah</span><br><span class="line">    or  bh,30h</span><br><span class="line">    add al,decimal_two[esi]</span><br><span class="line">    aaa</span><br><span class="line">    or bh,ah</span><br><span class="line">    or bh,30h</span><br><span class="line">    or al,30h</span><br><span class="line">    mov sum[edi],al</span><br><span class="line">    dec esi</span><br><span class="line">    dec edi</span><br><span class="line">    loop L1</span><br><span class="line">    mov sum[edi],bh</span><br><span class="line">    ;显示结果</span><br><span class="line">    mov edx,OFFSET sum</span><br><span class="line">    call WriteString</span><br><span class="line">    call Crlf</span><br><span class="line">    exit</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>

<h2 id="AAS指令"><a href="#AAS指令" class="headerlink" title="AAS指令"></a>AAS指令</h2><p>AAS指令两个未压缩十进制数相减，并把结果存储在 AL 中，最后再对 AL 中的结果进行调整，使其与 ASCII 数字表示一致。</p>
<p>指令运算逻辑（回顾）<br>这条指令在对 AL 中的差（由两个未组合的BCD码相减后的结果）进行调整，产生一个未组合的 BCD 码。调整方法如下：<br>（1）如 AL 中的低 4 位在 0~9 之间，且 AF 为 0，则跳转到（3）进行处理；<br>（2）如 AL 中的低 4 位在 A~F 之间，或 AF 为 1，则 AL&lt;-(AL)-6,AH&lt;-(AH)-1，且 AF 位置1；<br>（3）清除 AL 的高 4 位；<br>（4）AF 位送至 CF 位。<br>该指令影响标志位 AF 和 CF，对其他标志均无定义。</p>
<p>案例：</p>
<ol>
<li>ASCII码值 <code>&#39;8&#39; - &#39;9&#39; = 00FFh</code></li>
<li>AL 的低 4 位在 A~F 之间，AF&#x3D;1，AL-6&#x3D;0F9h，AH&#x3D;0FFh</li>
<li>AL 高4位清零，AL&#x3D;09h</li>
<li>CF&#x3D;AF&#x3D;1<br>最终结果：AX&#x3D;0FF09h，AL&#x3D;9（结果），CF&#x3D;AF&#x3D;1</li>
</ol>
<p><strong>AAS指令逻辑：</strong><br>‘8’ - ‘9’ 的结果变成 FF09 的逻辑：38h - 39h &#x3D; 8 - 9，被减数 8 借位 &#x3D; 18，18-9&#x3D;9，因此 AL 的结果是 9</p>
<p>AAS指令只有被减数不够用的时候才会用，如果够用就不需要使用 AAS 指令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">INCLUDE Irvine32.inc</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line">val1 BYTE &#x27;8&#x27;</span><br><span class="line">val2 BYTE &#x27;9&#x27;</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">    mov ah,0</span><br><span class="line">    mov al,val1</span><br><span class="line">    sub al,val2</span><br><span class="line">    jc next    </span><br><span class="line">    or al,30h</span><br><span class="line"></span><br><span class="line">next:</span><br><span class="line">    aas</span><br><span class="line">    sub al,10</span><br><span class="line">    movsx eax,al</span><br><span class="line">    call WriteInt</span><br><span class="line">    INVOKE ExitProcess,0</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>

<h2 id="AAM指令"><a href="#AAM指令" class="headerlink" title="AAM指令"></a>AAM指令</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/202192276-54b9f641-2869-4c3a-8c0a-6ff8cc006f84.png"
                      alt="51"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/202192356-dfb723b5-0042-42e1-9e62-3a44d6c0d94d.png"
                      alt="52"
                ></p>
<h2 id="AAD指令"><a href="#AAD指令" class="headerlink" title="AAD指令"></a>AAD指令</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/202192602-1d514986-a2f9-458c-bccb-8a745c2f1c27.png"
                      alt="53"
                ></p>
<h1 id="压缩十进制算术指令"><a href="#压缩十进制算术指令" class="headerlink" title="压缩十进制算术指令"></a>压缩十进制算术指令</h1><p>在压缩十进制整数中，每个字节存储两个十进制数字，每个十进制数字用 4 个数据位来表示，如果压缩十进制数字的个数是偶数，最高位以 0 填充。</p>
<p>压缩十进制整数至少有以下两方面的优点：</p>
<ul>
<li>数字几乎可以有任意数目的有效位，这使得执行高精度运算成为可能。</li>
<li>把压缩的十进制数转换成 ASCII 是相当简单的。</li>
</ul>
<p>有两条指令 DAA（加法后进行十进制数调整）和DAS（减法后进行十进制数调整）可用于调整压缩十进制数字加法和减法的运算结果。对于乘法和除法不存在这样的指令。</p>
<h2 id="DAA指令"><a href="#DAA指令" class="headerlink" title="DAA指令"></a>DAA指令</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/221347424-44065b20-43b0-4c50-b956-357a1ea3bd41.png"
                      alt="23"
                ></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">;---------------------------</span><br><span class="line">;程序名：AddPacked.asm</span><br><span class="line">;功能：演示DAA指令</span><br><span class="line">;作者：9unk</span><br><span class="line">;编写时间：2023-2-25</span><br><span class="line">;----------------------------</span><br><span class="line">INCLUDE Irvine32.inc</span><br><span class="line">.data</span><br><span class="line">packed_1 WORD 4536h</span><br><span class="line">packed_2 WORD 7207h</span><br><span class="line">sum DWORD ?</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">    mov sum,0</span><br><span class="line">    mov esi,0</span><br><span class="line">    ;低字节运算</span><br><span class="line">    mov al,BYTE PTR packed_1[esi]</span><br><span class="line">    add al,BYTE PTR packed_2[esi]</span><br><span class="line">    daa</span><br><span class="line">    mov BYTE PTR sum[esi],al</span><br><span class="line">    inc esi</span><br><span class="line">    ;高字节运算</span><br><span class="line">    mov al,BYTE PTR packed_1[esi]</span><br><span class="line">    adc al,BYTE PTR packed_2[esi]</span><br><span class="line">    daa</span><br><span class="line">    mov BYTE PTR sum[esi],al</span><br><span class="line">    ;加进位</span><br><span class="line">    inc esi</span><br><span class="line">    mov al,0</span><br><span class="line">    adc al,0</span><br><span class="line">    mov BYTE PTR sum[esi],al</span><br><span class="line">    ;显示结果</span><br><span class="line">    mov eax,sum</span><br><span class="line">    call WriteHex</span><br><span class="line">    call Crlf</span><br><span class="line">    exit</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>

<h2 id="DAS指令"><a href="#DAS指令" class="headerlink" title="DAS指令"></a>DAS指令</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://user-images.githubusercontent.com/25861639/221347995-97097edf-6bdc-4b1f-afc0-223b31d7a15d.png"
                      alt="24"
                ></p>
<h1 id="编程练习（略）"><a href="#编程练习（略）" class="headerlink" title="编程练习（略）"></a>编程练习（略）</h1><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a class="link"   target="_blank" rel="noopener" href="https://www.zhihu.com/question/31634405/answer/2581244793" >https://www.zhihu.com/question/31634405/answer/2581244793<i class="fas fa-external-link-alt"></i></a><br><a class="link"   target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/22976065/" >https://zhuanlan.zhihu.com/p/22976065/<i class="fas fa-external-link-alt"></i></a></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>本文标题：80386汇编-整数算数指令</li>
        <li>本文作者：9unk</li>
        <li>创建时间：2023-01-31 23:25:00</li>
        <li>
            本文链接：https://9unkk.github.io/2023/01/31/80386汇编-整数算数指令/
        </li>
        <li>
            版权声明：本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/%E6%B1%87%E7%BC%96/">#汇编</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2022/12/02/80386%E6%B1%87%E7%BC%96-%E6%9D%A1%E4%BB%B6%E5%A4%84%E7%90%86/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">80386汇编-条件处理</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">9unk</a>
        </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A7%BB%E4%BD%8D%E5%92%8C%E5%BE%AA%E7%8E%AF%E7%A7%BB%E4%BD%8D%E6%8C%87%E4%BB%A4"><span class="nav-number">2.</span> <span class="nav-text">移位和循环移位指令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E7%A7%BB%E4%BD%8D%E5%92%8C%E7%AE%97%E6%95%B0%E7%A7%BB%E4%BD%8D"><span class="nav-number">2.1.</span> <span class="nav-text">逻辑移位和算数移位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SHL-%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.</span> <span class="nav-text">SHL 指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SHR-%E6%8C%87%E4%BB%A4"><span class="nav-number">2.3.</span> <span class="nav-text">SHR 指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SAL-%E5%92%8C-SAR-%E6%8C%87%E4%BB%A4"><span class="nav-number">2.4.</span> <span class="nav-text">SAL 和 SAR 指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ROL-%E6%8C%87%E4%BB%A4"><span class="nav-number">2.5.</span> <span class="nav-text">ROL 指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RCL-%E5%92%8C-RCR-%E6%8C%87%E4%BB%A4"><span class="nav-number">2.6.</span> <span class="nav-text">RCL 和 RCR 指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SHLD-x2F-SHRD%E6%8C%87%E4%BB%A4"><span class="nav-number">2.7.</span> <span class="nav-text">SHLD&#x2F;SHRD指令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A7%BB%E4%BD%8D%E5%92%8C%E5%BE%AA%E7%8E%AF%E7%A7%BB%E4%BD%8D%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-number">3.</span> <span class="nav-text">移位和循环移位的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E5%8F%8C%E5%AD%97%E7%A7%BB%E4%BD%8D"><span class="nav-number">3.1.</span> <span class="nav-text">多双字移位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B9%98%E6%B3%95"><span class="nav-number">3.2.</span> <span class="nav-text">二进制乘法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BD%8D"><span class="nav-number">3.3.</span> <span class="nav-text">显示二进制数的数据位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%A6%BB-MS-DOS-%E6%96%87%E4%BB%B6%E7%9A%84%E5%90%84%E4%B8%AA%E6%97%A5%E6%9C%9F%E5%9F%9F"><span class="nav-number">3.4.</span> <span class="nav-text">分离 MS-DOS 文件的各个日期域</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B9%98%E6%B3%95%E5%92%8C%E9%99%A4%E6%B3%95%E6%8C%87%E4%BB%A4"><span class="nav-number">4.</span> <span class="nav-text">乘法和除法指令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MUL-%E6%8C%87%E4%BB%A4"><span class="nav-number">4.1.</span> <span class="nav-text">MUL 指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IMUL-%E6%8C%87%E4%BB%A4"><span class="nav-number">4.2.</span> <span class="nav-text">IMUL 指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E6%93%8D%E4%BD%9C%E6%95%B0"><span class="nav-number">4.2.1.</span> <span class="nav-text">单操作数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8C%E6%93%8D%E4%BD%9C%E6%95%B0"><span class="nav-number">4.2.2.</span> <span class="nav-text">双操作数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E6%93%8D%E4%BD%9C%E6%95%B0"><span class="nav-number">4.2.3.</span> <span class="nav-text">三操作数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BC%94%E7%A4%BA"><span class="nav-number">4.2.4.</span> <span class="nav-text">演示</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%98%E6%B3%95%E6%93%8D%E4%BD%9C%E7%9A%84%E5%9F%BA%E5%87%86%EF%BC%88%E6%80%A7%E8%83%BD%EF%BC%89%E6%B5%8B%E8%AF%95"><span class="nav-number">4.3.</span> <span class="nav-text">乘法操作的基准（性能）测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DIV-%E6%8C%87%E4%BB%A4"><span class="nav-number">4.4.</span> <span class="nav-text">DIV 指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%89%E7%AC%A6%E5%8F%B7%E6%95%B4%E6%95%B0%E9%99%A4%E6%B3%95"><span class="nav-number">4.5.</span> <span class="nav-text">有符号整数除法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%A6%E5%8F%B7%E6%89%A9%E5%B1%95%E6%8C%87%E4%BB%A4%EF%BC%88CBW%E3%80%81CWD%E3%80%81CDQ%EF%BC%89"><span class="nav-number">4.5.1.</span> <span class="nav-text">符号扩展指令（CBW、CWD、CDQ）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%A4%E6%B3%95%E6%BA%A2%E5%87%BA"><span class="nav-number">4.5.2.</span> <span class="nav-text">除法溢出</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">4.6.</span> <span class="nav-text">算术表达式的实现</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%8B1"><span class="nav-number">4.6.1.</span> <span class="nav-text">例1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%8B2"><span class="nav-number">4.6.2.</span> <span class="nav-text">例2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%8B3"><span class="nav-number">4.6.3.</span> <span class="nav-text">例3</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E5%8A%A0%E6%B3%95%E5%92%8C%E5%87%8F%E6%B3%95"><span class="nav-number">5.</span> <span class="nav-text">扩展加法和减法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ADC-%E6%8C%87%E4%BB%A4"><span class="nav-number">5.1.</span> <span class="nav-text">ADC 指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%8B%E5%AD%90"><span class="nav-number">5.1.1.</span> <span class="nav-text">例子</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SBB-%E6%8C%87%E4%BB%A4"><span class="nav-number">5.2.</span> <span class="nav-text">SBB 指令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ASCII%E5%92%8C%E6%9C%AA%E5%8E%8B%E7%BC%A9%E5%8D%81%E8%BF%9B%E5%88%B6%E7%AE%97%E6%9C%AF%E6%8C%87%E4%BB%A4"><span class="nav-number">6.</span> <span class="nav-text">ASCII和未压缩十进制算术指令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#AAA%E6%8C%87%E4%BB%A4"><span class="nav-number">6.1.</span> <span class="nav-text">AAA指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-AAA-%E6%8C%87%E4%BB%A4%E7%9A%84%E5%A4%9A%E5%AD%97%E8%8A%82%E5%8A%A0%E6%B3%95"><span class="nav-number">6.1.1.</span> <span class="nav-text">使用 AAA 指令的多字节加法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AAS%E6%8C%87%E4%BB%A4"><span class="nav-number">6.2.</span> <span class="nav-text">AAS指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AAM%E6%8C%87%E4%BB%A4"><span class="nav-number">6.3.</span> <span class="nav-text">AAM指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AAD%E6%8C%87%E4%BB%A4"><span class="nav-number">6.4.</span> <span class="nav-text">AAD指令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8E%8B%E7%BC%A9%E5%8D%81%E8%BF%9B%E5%88%B6%E7%AE%97%E6%9C%AF%E6%8C%87%E4%BB%A4"><span class="nav-number">7.</span> <span class="nav-text">压缩十进制算术指令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#DAA%E6%8C%87%E4%BB%A4"><span class="nav-number">7.1.</span> <span class="nav-text">DAA指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DAS%E6%8C%87%E4%BB%A4"><span class="nav-number">7.2.</span> <span class="nav-text">DAS指令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0%EF%BC%88%E7%95%A5%EF%BC%89"><span class="nav-number">8.</span> <span class="nav-text">编程练习（略）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">9.</span> <span class="nav-text">参考</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>




    
<script src="/js/lazyload.js"></script>



<div class="post-scripts pjax">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
