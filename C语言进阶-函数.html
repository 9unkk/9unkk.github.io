<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="咸鱼">
    <meta name="author" content="9unk">
    
    <title>
        
            C语言进阶-函数 |
        
        9unk Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.jpg">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":false,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/logo.jpg","favicon":"/images/logo.jpg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"人初做事，如鸡伏卵，不舍而生气渐充。如燕营巢，不息而结构渐牢。如滋培之木，不见其长，有时而大。如有本之泉，不舍昼夜，盈科而后进，放乎四海。"},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 6.0.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                9unk Blog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="page-template-container">
        
        
        <div class="page-template-content markdown-body">
            
                <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul>
<li>理解如何用函数来构建模块化的程序。</li>
<li>介绍C语言标准库中常见的数学函数。</li>
<li>能够创建新函数</li>
<li>理解在函数之间传递信息的机制</li>
<li>使用随机数的生成来介绍模拟技术。</li>
<li>理解如何编写和使用能够调用自身的函数</li>
</ul>
<p>开发和构建大小程序的最好方法就是用较小的程序片段或模块来构建它。</p>
<ul>
<li><p>软件工程经验5.1<br>应该避免从头开始构建一切。在可能得情况下，应该使用 ANSI C 库函数，而不是自己编写的新函数。这可以减少程序的错误。</p>
</li>
<li><p>可移植性提示5.1<br>使用C标准库中的函数将使得程序更易于移植。</p>
</li>
</ul>
<h1 id="C语言的程序模块"><a href="#C语言的程序模块" class="headerlink" title="C语言的程序模块"></a>C语言的程序模块</h1><p>C 标准库提供了极为丰富的函数集合，用来执行常规的数学计算、字符串处理、字符处理、输入输出和许多其他非常有用的函数。</p>
<p>标准库函数并不是C语言中的一部分，但是ANSI C系统中都提供了标准函数库。</p>
<p>对于学习C语言而言，可以分为两部分，一部分是C语言用法的学习，另一部分是库函数的学习。</p>
<p>程序员可以编写函数来完成特定的任务，函数可以在程序的许多位置，定义函数的语句只能编写一次，并且对其他函数而言是不可见的。</p>
<p>函数是通过函数调用来激发的。函数调用指定了函数名，并提供了相应的信息（参数），被调用的函数需要这些信息来完成指定的任务。</p>
<p>类似于老板（主调函数或主函数）命令员工（被调函数或工作函数）去执行一次任务，当任务完成后就回来报告。</p>
<p>例如要在屏幕上显示信息，将调用 printf 函数来执行这项任务，然后 printf 函数就会在屏幕上显示信息，任务完成后，就会回来向主函数报告（返回）。</p>
<p>主调函数并不知道被调函数是如何完成指定任务的，被调函数也可以调用其他函数，而主函数并不知道这一点。</p>
<p>这些隐藏执行细节的做法对软件工程开发是有益的。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/ae97df1e-867f-4c7d-8a4d-8bf151cf9287"
                      alt="1"
                ></p>
<h1 id="数学库函数"><a href="#数学库函数" class="headerlink" title="数学库函数"></a>数学库函数</h1><p>数学库函数可以帮助你实现某种常用的数学计算。</p>
<blockquote>
<p>注意：所有返回浮点值结果的数学库函数，它的返回值的数据类型都是双精度的。double（双精度）型的数据，与 float（浮点数）型的数据，都是使用 “%f” 来输出的。使用库函数时，需要包含 &lt;math.h&gt; 数学库头文件。</p>
</blockquote>
<ul>
<li>常用的数学库函数<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/5ade59fc-5273-473a-bbd3-5bd0af1f0f98"
                      alt="2"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/7d03c592-73a7-4a62-a8dd-e5633c4586fd"
                      alt="3"
                ></li>
</ul>
<h1 id="5-5-函数定义"><a href="#5-5-函数定义" class="headerlink" title="5.5 函数定义"></a>5.5 函数定义</h1><p>自定义的函数要先进行声明，就像使用变量一样，要提前声明再使用。如果自定的函数写在 main 之前，就不需要再次声明。</p>
<ul>
<li>函数定义的一般格式：<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">返回值类型 函数名(参数列表)</span><br><span class="line">&#123;</span><br><span class="line">	变量声明</span><br><span class="line">	语句</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ol>
<li>如果函数不返回任何值，返回值类型声明为void；</li>
<li>如果不声明返回值类型，函数默认返回 int 型数据，尽管如此，还是不建议忽略函数返回值类型的声明；</li>
<li>返回值类型、函数名和形参列表有时被称为函数头；</li>
<li>形参列表是用一组都好隔开的形参，它规定了函数接收到的参数的类型，如果函数不接收任何参数，则形参表写成 void；</li>
<li>花括号内的是函数体，也被称为程序块。程序块中可以定义其他函数，但只允许这个函数调用；</li>
<li>自定义函数返回到主函数有三种方法：（一）函数结尾不适用 return 语句，执行到函数最后，自动返回到主函数；（二）函数结尾使用 “return;” 返回到主函数；（三）函数结尾使用 “return 表达式” 返回到主函数。</li>
</ol>
<h2 id="fig05-03a"><a href="#fig05-03a" class="headerlink" title="fig05_03a"></a>fig05_03a</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_03a.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	用函数 square 来计算并打印从1到10的整数的平方。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//函数原型声明</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">square</span><span class="params">(<span class="type">int</span> y)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> x;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (x = <span class="number">1</span>; x &lt;= <span class="number">10</span>; x++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d  &quot;</span>, square(x));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数定义</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">square</span><span class="params">(<span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> y * y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="fig05-03b"><a href="#fig05-03b" class="headerlink" title="fig05_03b"></a>fig05_03b</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_03b.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	用函数 square 来计算并打印从1到10的整数的平方。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//函数定义</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">square</span><span class="params">(<span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> y * y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> x;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (x = <span class="number">1</span>; x &lt;= <span class="number">10</span>; x++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d  &quot;</span>, square(x));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="fig05-03c"><a href="#fig05-03c" class="headerlink" title="fig05_03c"></a>fig05_03c</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_03c.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	用函数 square 来计算并打印从1到10的整数的平方。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> x;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//函数原型声明（只允许mian函数调用）</span></span><br><span class="line">	<span class="type">int</span> <span class="title function_">square</span><span class="params">(<span class="type">int</span> y)</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (x = <span class="number">1</span>; x &lt;= <span class="number">10</span>; x++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d  &quot;</span>, square(x));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数定义</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">square</span><span class="params">(<span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> y * y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-6-函数原型"><a href="#5-6-函数原型" class="headerlink" title="5.6 函数原型"></a>5.6 函数原型</h1><p>C语言的函数原型是从 C++ 开发者那里借鉴过来的。函数原型告诉编译器：函数的返回值类型，被调用时希望接收的形参个数、类型和顺序。然后编译器据此去检查函数调用语句是否规范。早期的C语言版本并不进行这类检查，所以，函数调用时不规范，导致语句执行错误，而函数内部又是被隐藏的，这就导致很难检测这些非致命的逻辑错误。</p>
<p>参数类型也是需要注意的地方，例如：整数和浮点数，这两个类型的参数精度不一样。如果填写的实参是浮点数，而函数的形参是整数，这就会导致结果出错。因为编译器不能够检测传递给函数的实参，且通用寄存器和浮点数寄存器不是一个东西，存储的数据是完全不一样的。</p>
<p>以下是从高到低的顺序列出了每种数据类型的级别及其对应的 printf 和 scanf 转换说明符。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/7233b25c-e523-4e71-b4f6-6e3f9b5bc539"
                      alt="4"
                ></p>
<p>将一个数据向低级别类型转换一般会导致结果出错。因此，只有通过将其赋给另外一个低级别类型变量，或采用一个强制类型转换运算符，才能够正确实现一个数据向低级别数据的转换。</p>
<h2 id="fig05-04"><a href="#fig05-04" class="headerlink" title="fig05_04"></a>fig05_04</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_04.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	找到三个整数中最大的整数。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">maximum</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> number1;</span><br><span class="line">	<span class="type">int</span> number2;</span><br><span class="line">	<span class="type">int</span> number3;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入三个整数: &quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;number1, &amp;number2, &amp;number3);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;最大的整数是: %d\n&quot;</span>, maximum(number1, number2, number3));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">maximum</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> max = x;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (y &gt; max)</span><br><span class="line">	&#123;</span><br><span class="line">		max = y;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (z &gt; max)</span><br><span class="line">	&#123;</span><br><span class="line">		max = z;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-7-文件头"><a href="#5-7-文件头" class="headerlink" title="5.7 文件头"></a>5.7 文件头</h1><p>每一个标准函数库中都有一个头文件，头文件中包含了库中所有函数的函数原型、函数调用所需的各种数据类型和常量的定义。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/f8430944-b7b0-4abd-938a-9a555860b4c4"
                      alt="5"
                ></p>
<p>程序员可以创建自己的头文件，程序员定义的文件头也应该是使用 .h 扩展名。通过使用 #clude 预处理指令，可以把程序定义的文件头包含在程序中，例如，在程序顶部使用下列预处理指令，就可以把文件头 square.h 包含在程序中。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;square.h&quot;</span></span></span><br></pre></td></tr></table></figure>

<h1 id="5-8-调用函数和引用调用"><a href="#5-8-调用函数和引用调用" class="headerlink" title="5.8 调用函数和引用调用"></a>5.8 调用函数和引用调用</h1><p>很多程序在设计语言中，调用函数的两种途径是值调用和引用调用。当函数以值调用的方式传递时，主程序就会生成参数值的一个副本，并把它传递给被调用的函数。对这个副本进行的修改并不会影响到主程序中的原始变量值。当参数按照引用调用方式传递时，主程序实际上会允许被调用函数去修改原始变量值。</p>
<p>如果被调用函数不需要修改主程序的原始变量值，就应该使用值调用的方式。这可以防止意外的负面影响，这些意外的负面影响会大大妨碍我们开发正确可靠的软件系统。只有在需要修改原始变量值时，才使用引用调用。</p>
<p>在C语言中，所有调用都是值调用。但是可以使用地址运算符和间接运算符来模拟引用调用。数组是按照自动引用的方式来传递的。</p>
<blockquote>
<p>首先函数传参有三种方式：寄存器传参、堆栈传参、约定存储单元传参（全局变量作为参数）。上面这段文字中的 “值调用” 和 “引用调用” 指的是堆栈传参。简单来说“值调用” 就是 “push 参数的值”；“引用调用” 就是 “push 参数的指针”</p>
</blockquote>
<h2 id="fig05-06-c（涉及指针内容，自己补充的，方便理解）"><a href="#fig05-06-c（涉及指针内容，自己补充的，方便理解）" class="headerlink" title="fig05-06.c（涉及指针内容，自己补充的，方便理解）"></a>fig05-06.c（涉及指针内容，自己补充的，方便理解）</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_06.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	演示值调用和引用调用。</span></span><br><span class="line"><span class="comment">	注意：X86编译指针的值是8个比特位=4字节；X64编译指针的值是16个比特位=8字节。</span></span><br><span class="line"><span class="comment">	如果在X64中习惯性的使用 int 存储指针会导致程序错误。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> <span class="keyword">warning</span>(disable:4996)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;libssl.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;libcrypto.lib&quot;</span>)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;openssl/md5.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//原型声明</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">move1</span><span class="params">(<span class="type">int</span> y)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//原型声明</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">move2</span><span class="params">(<span class="type">int</span>* y)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//原型声明</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">move3</span><span class="params">(<span class="type">long</span> <span class="type">long</span>* y)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> x = <span class="number">3</span>;</span><br><span class="line">	<span class="type">long</span> <span class="type">long</span> x1 = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//堆栈传参（值调用：变量x值不变）</span></span><br><span class="line">	move1(x);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, x);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//X86 堆栈传参（引用调用：变量x值改变）</span></span><br><span class="line">	<span class="comment">//move2(&amp;x);</span></span><br><span class="line">	<span class="comment">//printf(&quot;%d\n&quot;, x);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//X64 堆栈传参（引用调用：变量x值改变）</span></span><br><span class="line">	move3(&amp;x1);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, x1);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">move1</span><span class="params">(<span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	y = <span class="number">2</span>;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//X86编译</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">move2</span><span class="params">(<span class="type">int</span>* y)</span></span><br><span class="line">&#123;</span><br><span class="line">	*y = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//X64编译</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">move3</span><span class="params">(<span class="type">long</span> <span class="type">long</span>* y)</span></span><br><span class="line">&#123;</span><br><span class="line">	*y = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-9-随机数的生成"><a href="#5-9-随机数的生成" class="headerlink" title="5.9 随机数的生成"></a>5.9 随机数的生成</h1><p>在 C 函数标准库中，利用文件头 <stdlib> 中的 rand 函数生成一个随机数。函数 rand 可以产生 0~32767 之间的整数。</p>
<h2 id="fig05-07"><a href="#fig05-07" class="headerlink" title="fig05_07"></a>fig05_07</h2><figure class="highlight plaintext"><figcaption><span>% 6``` 可以产生一系列值在 0 到 5 之间的整数，这就叫比例缩放，数字 6 就是一个比例因子。但是实际的情况是骰子的点数大小在 1到 6 之间的整数，所以通过对上述结果增加 1 来实现。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">``` c</span><br><span class="line">/*程序名：fig05_07.c*/</span><br><span class="line">/*</span><br><span class="line">	使用 rand() 生成六面体骰子的随机数。</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#define _CRT_SECURE_NO_DEPRECATE</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	int i;	//计数器</span><br><span class="line"></span><br><span class="line">	/*循环20次*/</span><br><span class="line">	for (int i = 1; i &lt;= 20; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		/*获得从1~6的随机数，并输出*/</span><br><span class="line">		printf(&quot;%10d&quot;, 1 + rand() % 6);</span><br><span class="line"></span><br><span class="line">		/*如果计数器的值能被5整除，换行*/</span><br><span class="line">		if (i % 5 == 0)</span><br><span class="line">		&#123;</span><br><span class="line">			printf(&quot;\n&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;	//程序结束</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="fig05-08"><a href="#fig05-08" class="headerlink" title="fig05_08"></a>fig05_08</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_08.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	骰子的每次出现的点数的可能性是基本相同的，</span></span><br><span class="line"><span class="comment">	下面模拟一个骰子的6000次投掷结果来演示。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> frequencry1 = <span class="number">0</span>;	<span class="comment">/*统计 1 点骰子出现的数量*/</span></span><br><span class="line">	<span class="type">int</span> frequencry2 = <span class="number">0</span>;	<span class="comment">/*统计 2 点骰子出现的数量*/</span></span><br><span class="line">	<span class="type">int</span> frequencry3 = <span class="number">0</span>;	<span class="comment">/*统计 3 点骰子出现的数量*/</span></span><br><span class="line">	<span class="type">int</span> frequencry4 = <span class="number">0</span>;	<span class="comment">/*统计 4 点骰子出现的数量*/</span></span><br><span class="line">	<span class="type">int</span> frequencry5 = <span class="number">0</span>;	<span class="comment">/*统计 5 点骰子出现的数量*/</span></span><br><span class="line">	<span class="type">int</span> frequencry6 = <span class="number">0</span>;	<span class="comment">/*统计 6 点骰子出现的数量*/</span></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> roll;		<span class="comment">//计数器</span></span><br><span class="line">	<span class="type">int</span> face;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环 6000 次的结果</span></span><br><span class="line">	<span class="keyword">for</span> (roll = <span class="number">1</span>; roll &lt;= <span class="number">6000</span>; roll++)</span><br><span class="line">	&#123;</span><br><span class="line">		face = <span class="number">1</span> + rand() % <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> (face)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			++frequencry1;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			++frequencry2;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			++frequencry3;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			++frequencry4;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">			++frequencry5;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">			++frequencry6;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*显示输出投掷结果*/</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s%13\n&quot;</span>, <span class="string">&quot;Face&quot;</span>, <span class="string">&quot;Frequency&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;    1%13d\n&quot;</span>, frequencry1);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;    2%13d\n&quot;</span>, frequencry2);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;    3%13d\n&quot;</span>, frequencry3);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;    4%13d\n&quot;</span>, frequencry4);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;    5%13d\n&quot;</span>, frequencry5);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;    6%13d\n&quot;</span>, frequencry6);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="fig05-09"><a href="#fig05-09" class="headerlink" title="fig05_09"></a>fig05_09</h2><p>实际上，函数 rand 产生的是伪随机数。也就是说在一个程序中，反复调用函数 rand，是可以看到一系列看上去是随机出现的整数。但是重复执行这个程序，那一些列的整数将重复出现。</p>
<p>如果对程序进行彻底改造，它就有可能做到每次运行都产生不同的整数，这就是随机化，他是通过标准函数库中的函数 srand 来实现的。函数 scrand，需要提供一个无符号的整数。不同的无符号整数，可以控制函数 scrand 在每次被调用时产生出不同的随机数列。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_09.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	将投掷骰子随机化</span></span><br><span class="line"><span class="comment">	使用 srand 函数代替 rand 函数产生随机数。或者将 srand 函数放入循环语句内。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> <span class="keyword">warning</span>(disable:4996)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;libssl.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;libcrypto.lib&quot;</span>)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;openssl/md5.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i;			<span class="comment">//计数器</span></span><br><span class="line">	<span class="type">unsigned</span> seed;	<span class="comment">//作为随机数生成器的种子</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入随机数种子值：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%u&quot;</span>, &amp;seed);</span><br><span class="line"></span><br><span class="line">	srand(seed);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*循环10次*/</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//根据同一个无符号整数生成随机数</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%10d&quot;</span>, <span class="number">1</span> + (rand() % <span class="number">6</span>));</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (i % <span class="number">5</span> == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>程序每次运行时，如果用户输入的种子是一样的结果就是一样的。为了实现随机化，可以使用如下语句：”srcand (time(NULL))”。<br>注意：”srand(seed); “ 不能放在循环内，因为 srand 函数执行速度比 for 语句执行的慢，这会导致输出的结果是一样的，不能达到随机数效果。</p>
</blockquote>
<h2 id="fig05-10"><a href="#fig05-10" class="headerlink" title="fig05_10"></a>fig05_10</h2><p>“双骰子赌博”：一个玩家要投掷两个骰子。每个骰子都有六个面，分别标有1,2,3,4,5和6个点。当被投掷的骰子停下来后，要统计两个骰子面上所标的点数之和作为判断输赢的依据。</p>
<ul>
<li>如果第一次投掷的两个骰子，得到的点数之和等于7或11，则玩家获胜，游戏结束。</li>
<li>如果第一次投掷的两个骰子，得到的点数之和等于2,3或12，则玩家失败，游戏结束。</li>
<li>如果第一次投掷的两个骰子，得到的点数之和等于4,5,6,8,9或10，则将这个数目作为玩家获胜需要掷出的 “点数”，为了获胜，玩家必须继续投掷两个骰子，直至一次掷出的点数之和等于这个 “点数”，这时游戏结束。但在此之前，掷出的点数之和等于7，则玩家失败，游戏结束。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_10.c*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//游戏的状态</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Status</span> &#123;</span> CONTINUE, WON, LOST &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//原型声明</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">rollDice</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> sum;</span><br><span class="line">	<span class="type">int</span> myPoint;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*游戏状态*/</span></span><br><span class="line">	<span class="class"><span class="keyword">enum</span> <span class="title">Status</span> <span class="title">gameStatus</span>;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*生成随机种子*/</span></span><br><span class="line">	srand(time(<span class="literal">NULL</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*第一次投掷的结果*/</span></span><br><span class="line">	sum = rollDice();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**/</span></span><br><span class="line">	<span class="keyword">switch</span> (sum)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="comment">/*第一次赢*/</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">	<span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">		gameStatus = WON;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*第一次没有赢*/</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">	<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">	<span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">		gameStatus = LOST;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*保存点数*/</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		gameStatus = CONTINUE;</span><br><span class="line">		myPoint = sum;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Point is %d\n&quot;</span>, myPoint);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*循环直至游戏结束*/</span></span><br><span class="line">	<span class="keyword">while</span> (gameStatus == CONTINUE)</span><br><span class="line">	&#123;</span><br><span class="line">		sum = rollDice();	<span class="comment">/*继续投掷*/</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (sum == myPoint)</span><br><span class="line">		&#123;</span><br><span class="line">			gameStatus = WON;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (sum == <span class="number">7</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				gameStatus = LOST;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*显示赢或输的信息*/</span></span><br><span class="line">	<span class="keyword">if</span> (gameStatus == WON)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;玩家获胜。\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;玩家输了。\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*掷骰子，计算总和并显示结果*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">rollDice</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> die1;		<span class="comment">/*第一个骰子投掷结果*/</span></span><br><span class="line">	<span class="type">int</span> die2;		<span class="comment">/*第二个骰子投掷结果*/</span></span><br><span class="line">	<span class="type">int</span> workSum;	<span class="comment">/*两个骰子的总结果*/</span></span><br><span class="line"></span><br><span class="line">	die1 = <span class="number">1</span> + (rand() % <span class="number">6</span>);	<span class="comment">/*第一个骰子的随机值*/</span></span><br><span class="line">	die2 = <span class="number">1</span> + (rand() % <span class="number">6</span>);	<span class="comment">/*第二个骰子的随机值*/</span></span><br><span class="line">	workSum = die1 + die2;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*显示投掷的结果*/</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;玩家投掷的点数是 %d + %d = %d\n&quot;</span>, die1, die2, workSum);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> workSum;		<span class="comment">/*返回两个骰子一共投掷的结果*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>枚举类型常量 enum 来定义，它是一组用标识符表示的整型常量的集合。枚举类型中的元素被称为枚举常量或符号常量。</p>
</blockquote>
<h1 id="5-12-存储类型"><a href="#5-12-存储类型" class="headerlink" title="5.12 存储类型"></a>5.12 存储类型</h1><p>C 语言一共有四种存储类型，它们对应的存储类型说明符分别是：auto，register，extern 和 static。 标识符的存储类型决定了它的存储周期、作用域和链接。</p>
<ul>
<li>标识符的存储周期：指的是标识符所代表的变量，存在于内存中的时间。有些变量的存在时间很短，有些变量反复地被创建、删除，有些变量则在程序的整个运行时间内一直驻留内存。</li>
<li>标识符的作用域：指的是标识符所代表的变量，能够在程序中被访问的区域。有些变量能够在整个程序的任何地方都可以被访问到，有些变量只能在程序的部分地方被访问到。</li>
<li>标识符的链接：指的是针对具有多个源文件的程序而言，这个标识符仅仅能够被定义它的源文件所识别，还是能够通过适当的声明使其也能被其他源文件所识别。</li>
</ul>
<p>C语言的四种存储类型可以按照其对应的存储周期，分成两类：自动存储周期和静态存储周期。</p>
<ul>
<li><p>关键字 auto 和 register 用于声明自动存储周期的变量。具有自动存储周期的变量。具有自动存储周期的变量在程序进入到定义它的程序块时被创建，并在程序块的活动期间一直存在于内存中，在程序退出程序块时才被删除。</p>
</li>
<li><p>只有变量在具有自动存储周期。一个函数的局部变量通常属于自动存储周期。自动存储周期的变量声明通常都是默认忽略的，而关键字 auto 就是用来显式声明自动存储周期的变量。</p>
</li>
<li><p>存储类型说明符 register 可以放在自动变量的声明语句前，用来告诉编译器将这个自动变量驻留在寄存器中。由于对寄存器的访问要明天快于内存的访问，所以将诸如 “计数器” 或 “总和” 这样需要频繁访问的变量驻留在寄存器中，可以大大减少将他们反复地从内存装入寄存器和寄存器存回内存的开销。但是，如今的编译器已具有很好的优化功能，编译器自己会去找出频繁访问的变量，并将其驻留在寄存器中，不再需要使用 register 声明。</p>
</li>
<li><p>关键字 extern 和 static 是用于声明对应于静态存储周期的变量名和函数名的标识符。静态存储周期的标识符从程序运行的开始时刻起就有效。即对于静态变量，它所占用的存储单元是在程序运行开始就进行分配初始化的，而且只分配初始化一次；对于函数，函数名从程序运行开始起就有效。但是，变量名和函数名有效，并不意味着在程序中的任何地方都可以访问到它们。存储周期和作用域是两个不同的概念。</p>
</li>
</ul>
<p>具有静态存储周期的标识符可分为两类：外部标识符和static声明的局部变量。在默认情况下，全局变量和函数名都属于外部存储类extern。在所有函数体之外声明的变量都是全局变量，全局变量在程序运行期间始终存在。</p>
<ul>
<li><p>全局变量和函数名可以被程序中位于它们的声明胡定义语句之后的任何函数所访问。这也就是为什么在main函数前定义的函数就不需要函数原型，而在main之后定义的函数就需要使用函数原型。例如，想要调用 printf，就需要在程序开头嵌入文件 stdio.h，这样 printf 函数原型就被放在程序最前面，于是，程序其余部分就可以访问 printf 函数了。</p>
</li>
<li><p>用关键字 static 声明的局部变量也一样只能咋定义它的函数中被访问到。但是与自动变量不同，静态的局部变量在函数执行结束之后仍然有保留。在这个函数下一次被调用时，静态局部变量拥有的是上一次函数执行结束时这个变量所对应的数值。</p>
</li>
</ul>
<h2 id="fig05-11"><a href="#fig05-11" class="headerlink" title="fig05_11"></a>fig05_11</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_11.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	演示 static 定义的局部变量。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ps</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//第二次调用 ps() 数值变成：1、2、3</span></span><br><span class="line">	ps();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//第二次调用 ps() 数值变成：4、5、6</span></span><br><span class="line">	ps();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ps</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> num = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, num);</span><br><span class="line">		num++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>extern 标识过的变量和函数可以被其他源文件调用，学过前面汇编的都能理解，这里不过多描述。</p>
</blockquote>
<h1 id="标识符作用域的规定"><a href="#标识符作用域的规定" class="headerlink" title="标识符作用域的规定"></a>标识符作用域的规定</h1><p>一个标识符的作用域是指这个标识符能够在程序中被访问到的区域。C语言的标识符有四种不同的作用域：函数作用域、文件作用域、程序块作用域和函数原型作用域。</p>
<ul>
<li><p>标号是唯一具有函数作用域的标识符：只能在定义它的函数内才能访问，函数外就不能访问。标号一般用于 switch 语句 和 goto 语句。</p>
</li>
<li><p>所有函数之外的定义的标识符都具有文件作用域，这样的标识符在从定义它的语句开始到整个程序结束的区间内，都能被所有函数 “识别”。全局变量、函数定义和位于函数之外的函数原型具有文件作用域。</p>
</li>
<li><p>程序块内部定义的标识符具有程序块作用域。程序块作用域的下限是表示程序块结束的右花括号(})。在函数开始时定义的局部变量就具有程序块的作用域。类似还有函数的形参，形参也被函数当做局部变量使用。即使是 static 声明的局部变量，尽管从程序开始运行就已经存在，但是它的作用域同样也是程序块作用域。</p>
</li>
<li><p>唯一具有函数原型作用域的标识符是出现在函数原型形参列表中的形参名的那些标识符。定义函数原型，只要给出形参类型即可，并不需要形参名，所以，编译器在编译函数原型时将忽略掉形参列表中的标识符，这些标识符可以在程序的其他地方作用域其他用途而不会引起混乱。</p>
</li>
</ul>
<h2 id="fig05-12"><a href="#fig05-12" class="headerlink" title="fig05_12"></a>fig05_12</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_12.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	案例演示</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">useLocal</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">useStaticLocal</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">useGlobal</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x = <span class="number">1</span>;		<span class="comment">//全局变量</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> x = <span class="number">5</span>;	<span class="comment">/*main 函数局部变量*/</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;main 函数局部变量值是 %d\n&quot;</span>, x);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//内联程序块局部函数</span></span><br><span class="line">	&#123;<span class="type">int</span> x = <span class="number">7</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;main 函数内联程序块的局部变量值是 %d\n&quot;</span>, x); &#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;main 函数局部变量值是 %d\n&quot;</span>, x);</span><br><span class="line">	</span><br><span class="line">	useLocal();</span><br><span class="line">	useStaticLocal();</span><br><span class="line">	useGlobal();</span><br><span class="line">	useLocal();</span><br><span class="line">	useStaticLocal();</span><br><span class="line">	useGlobal();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;main函数局部变量x的值是 %d\n&quot;</span>, x);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">useLocal</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> x = <span class="number">25</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n运行函数useLocal之后，局部变量x的值是 %d\n&quot;</span>, x);</span><br><span class="line">	x++;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;退出函数useLocal之前，局部变量x的值是 %d\n&quot;</span>, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">useStaticLocal</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> x = <span class="number">50</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n运行函数useStaticLocal之后，静态局部变量x的值是 %d\n&quot;</span>, x);</span><br><span class="line">	x++;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;退出函数useStaticLocal之前，静态局部变量x的值是 %d\n&quot;</span>, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">useGlobal</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n运行函数useGlobal之后，全局变量x的值是 %d\n&quot;</span>, x);</span><br><span class="line">	x *= <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;退出函数useGlobal之前，全局变量x的值是 %d\n&quot;</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-14-递归"><a href="#5-14-递归" class="headerlink" title="5.14 递归"></a>5.14 递归</h1><p>在一些特殊问题求解算法中，往往需要一个函数调用它自己。递归函数就是直接调用或通过其他函数间接调用自己的函数。</p>
<h2 id="fig05-14"><a href="#fig05-14" class="headerlink" title="fig05_14"></a>fig05_14</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_14.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	打印 0~10 的整数阶乘</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="title function_">factorial</span><span class="params">(<span class="type">long</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i;	<span class="comment">//计数器</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%2d! = %ld\n&quot;</span>, i, factorial(i));</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="title function_">factorial</span><span class="params">(<span class="type">long</span> number)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (number &lt;= <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> (number * factorial(number - <span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="fig05-15"><a href="#fig05-15" class="headerlink" title="fig05_15"></a>fig05_15</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：fig05_15.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	打印斐波那契数列</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="title function_">fibonacci</span><span class="params">(<span class="type">long</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">long</span> result;</span><br><span class="line">	<span class="type">long</span> number;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;输入一个整数：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%ld&quot;</span>, &amp;number);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//计算斐波那契数列</span></span><br><span class="line">	result = fibonacci(number);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//打印结果</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d 的斐波那契数列的值是 %d\n&quot;</span>, number, result);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="title function_">fibonacci</span><span class="params">(<span class="type">long</span> n)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (n == <span class="number">0</span> || n == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> n;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在设计类似上面整个fibonacci的程序时，需要注意计算量的问题。例如在 fibonacci 函数的每一级递归中，都会使函数调用的次数增加一倍。也就是说为了计算第n个fibonacci数，共需要调用 fibonacci 函数的次数达到 2^n 数量级，可见这个次数增长是很快的。在计算机科学理论总，这种计算量被称为 “指数计算复杂度”。</p>
</blockquote>
<h1 id="递归和迭代"><a href="#递归和迭代" class="headerlink" title="递归和迭代"></a>递归和迭代</h1><p>调用函数有两种重要手段：递归或迭代。</p>
<ul>
<li><p>递归和迭代都分别以一种控制结构为基础：迭代基于循环结构，而递归基于选择结构。递归和迭代都不需要循环执行：迭代是显式地使用一个循环结构，而递归通过重复地进行函数调用来实现循环。</p>
</li>
<li><p>递归和迭代都分别需要进行终止测试：当循环继续条件为假时，迭代结束；而递归是在到达基线条件时终止。</p>
</li>
<li><p>基于计数控制循环的迭代和递归都是逐渐接近终止点的；迭代总是不断地改变计数器变量直至循环条件为假，递归总是不断地将问题的规模逐渐变小直至达到基线条件。</p>
</li>
<li><p>递归和迭代都可能出现无线执行的情况：如果一个循环继续条件永远不为假，那么将导致无线循环；如果递归执行产生的新问题不逐渐收敛基线条件，那么会导致无限递归。</p>
</li>
</ul>
<p>递归有很多负面作用。它需要不断地执行函数调用机制，因此，产生很大的函数调用开销，从而在处理器的时间和存储器的空间两方面导致很大的开销。每次递归调用都要创建函数的一个副本，这时很耗费存储器的。迭代通常都是发生在函数内部，所以反复执行函数调用结构的开销和额外占用存储空间基本上可以忽略不计。</p>
<blockquote>
<p>任何一个可以递归方法来求解的问题，都可以用迭代方法来求解。</p>
</blockquote>
<h1 id="课后练习"><a href="#课后练习" class="headerlink" title="课后练习"></a>课后练习</h1><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/591ee395-601f-48b7-b86f-c8958af1321c"
                      alt="6"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/97094d49-4cdb-40e2-98bc-47afcedb061a"
                      alt="7"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/6c2d35c4-7f7f-4da9-b2f1-45b5b265981d"
                      alt="8"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/42df20a6-54bb-475b-849b-b8d57e515ca1"
                      alt="9"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/efa08d6b-42b3-4b27-83b1-21de5860b2c1"
                      alt="10"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/a86bd2b6-600e-4801-8522-f373b1e05b07"
                      alt="11"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/db4821d7-7cb9-47a5-b7a3-2c91cebe8f51"
                      alt="12"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/2ba37448-d8b5-4de4-a452-b517025ac220"
                      alt="13"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/3e32204d-fafa-453d-bb19-3c38d088d3cd"
                      alt="14"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/302dfe25-2223-4745-ae49-453c9ab4e1d8"
                      alt="15"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/1fe5aa02-7349-431f-b08a-911db0ade805"
                      alt="16"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/0a979953-c37d-4d1f-926a-7171ff075971"
                      alt="17"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/f365f8d0-e0f1-4491-b18f-a88bcc984999"
                      alt="18"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/1453ddfd-1d92-4e2c-8601-b25afeb68d8c"
                      alt="19"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/3afa36af-b47b-4102-bc3a-b96ce1497fec"
                      alt="21"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/96db741b-2983-4c40-ace8-dc4560f289b7"
                      alt="22"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/6ad4e30d-e299-4dfa-b5b6-1818e86fe14e"
                      alt="23"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/08c0fbc7-1bb6-4f87-9f52-3e79242f8e3d"
                      alt="24"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/4dce49cd-03e1-48cf-8e64-cfb1a7854250"
                      alt="25"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/435e5afc-c3f7-478c-bbfc-faa5c3b10ddb"
                      alt="26"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://github.com/9unkk/tuchuang/assets/25861639/77e3e61a-5872-4fb4-b7fc-a9cdf3a3c5ea"
                      alt="27"
                ></p>
<h2 id="5-8"><a href="#5-8" class="headerlink" title="5.8"></a>5.8</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：5.8.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	略</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, <span class="built_in">fabs</span>(<span class="number">7.5</span>));		<span class="comment">//7.500000</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, <span class="built_in">floor</span>(<span class="number">7.5</span>));	<span class="comment">//7.000000</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, <span class="built_in">fabs</span>(<span class="number">0.0</span>));		<span class="comment">//0.000000</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, <span class="built_in">ceil</span>(<span class="number">0.0</span>));		<span class="comment">//0.000000</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, <span class="built_in">fabs</span>(<span class="number">-6.4</span>));	<span class="comment">//6.400000</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, <span class="built_in">ceil</span>(<span class="number">-6.4</span>));	<span class="comment">//-6.000000</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, <span class="built_in">ceil</span>(-<span class="built_in">fabs</span>(<span class="number">-8</span> + <span class="built_in">floor</span>(<span class="number">-5.5</span>))));		<span class="comment">//-14.000000</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-9"><a href="#5-9" class="headerlink" title="5.9"></a>5.9</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*程序名：5.9.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	略</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_DEPRECATE</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//计算停车收费</span></span><br><span class="line"><span class="type">float</span> <span class="title function_">Parking</span><span class="params">(<span class="type">float</span> hour)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">float</span> doller=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//计算停车费</span></span><br><span class="line">	<span class="keyword">if</span> (hour &lt;= <span class="number">3</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		doller = <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> ((hour &gt; <span class="number">3</span>)&amp;&amp;(hour&lt;<span class="number">24</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		doller = ((hour - <span class="number">3</span>) * <span class="number">0.5</span>) + <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		doller = <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> doller;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">float</span> hour = <span class="number">0</span>;</span><br><span class="line">	<span class="type">float</span> doller = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Car\tHours\tCharge\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;1\t1.5\t%.2f\n&quot;</span>, Parking(<span class="number">1.5</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;2\t4\t%.2f\n&quot;</span>, Parking(<span class="number">4</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;3\t24\t%.2f\n&quot;</span>, Parking(<span class="number">24</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;TOTAL\t29\t%2.f\n&quot;</span>, Parking(<span class="number">24</span>) + Parking(<span class="number">4</span>) + Parking(<span class="number">1.5</span>));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	<span class="comment">//程序结束</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-8"><a href="#4-8" class="headerlink" title="4.8"></a>4.8</h2>
            
        </div>
        <div class="page-template-comments">
            
        </div>
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2022</span>
              -
            
            2024&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">9unk</a>
        </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>




    
<script src="/js/lazyload.js"></script>



<div class="post-scripts pjax">
    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
